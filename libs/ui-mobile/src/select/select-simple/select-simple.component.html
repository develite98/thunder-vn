<div (click)="cva.markAsTouched(); showDialog(selectTemplate)">
  @if (templateRef && cva.value) {
    <ng-container
      *ngTemplateOutlet="templateRef; context: { $implicit: selectedItem$() }"
    ></ng-container>
  } @else {
    <span class="input input-bordered flex items-center justify-between"
      >{{ cva.value || placeHolder }}
      <mix-icon icon="chevron-down"></mix-icon>
    </span>
  }
</div>

<ng-template #selectTemplate let-dialog>
  <div
    class="p-4 border-b border-base-content/10 text-center whitespace-nowrap overflow-hidden text-ellipsis"
  >
    {{ placeHolder }}
  </div>
  <div class="max-h-[400px] overflow-auto p-4 flex flex-col">
    @for (item of displayItems(); track $index) {
      <div
        class="w-full cursor-pointer flex justify-between items-center py-2"
        (click)="temporaryValue = item.value"
        [class.text-primary]="temporaryValue === item.value"
      >
        {{ item.displayName }}

        @if (temporaryValue === item.value) {
          <mix-icon class="float-end text-primary" icon="check"></mix-icon>
        }
      </div>
    }
  </div>
  <div class="join w-full flex border-t border-base-content/10">
    <button
      class="btn join-item grow text-error btn-ghost"
      (click)="onCancel(); dialog.close()"
    >
      {{ cancelLabel || 'common.cancel' | transloco }}
    </button>
    <button
      class="btn join-item grow text-primary btn-ghost"
      (click)="onConfirm(); dialog.close()"
    >
      {{ okLabel || 'common.ok' | transloco }}
    </button>
  </div>
</ng-template>
