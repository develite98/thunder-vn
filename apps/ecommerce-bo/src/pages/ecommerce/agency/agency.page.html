<div class="w-full gap-4">
  <mix-table
    [toolbarTpl]="toolar"
    [data]="store.dataEntities() || []"
    [paging]="store.pagingInfo()"
    [loading]="store.isLoading()"
    [contextMenu]="contextMenu"
    (goPrevious)="store.goPreviousPage()"
    (goNext)="store.goNextPage()"
    (refresh)="event.refreshed(store.query())"
    (rowClick)="onEditUser($event.id)"
  >
    <ng-template #toolar>
      <mix-button
        [prefixIcon]="'plus'"
        [color]="'primary'"
        (click)="onCreateUser()"
      >
        {{ 'ecommerce.agency.create' | transloco }}
      </mix-button>
    </ng-template>

    <div mixTableColumn [header]="'ID'" [key]="'systemName'">
      <ng-template mixColumnCell let-row>
        <mix-copy-text [text]="row.data.id"></mix-copy-text>
      </ng-template>
    </div>

    <div mixTableColumn [header]="'Name'" [key]="'displayName'">
      <ng-template mixColumnCell let-row>
        <div>
          <div class="font-medium">{{ row.data.title }}</div>
          @if (row.data.status === 'All') {
            <span class="badge badge-primary mt-1">
              {{ 'ecommerce.agency.mainBranch' | transloco }}
            </span>
          }
        </div>
      </ng-template>
    </div>

    <div mixTableColumn [header]="'Address'" [key]="'address'">
      <ng-template mixColumnCell let-row>
        {{ row.data.address }}
      </ng-template>
    </div>

    <div mixTableColumn [header]="'Created'" [key]="'createdDateTime'">
      <ng-template mixColumnCell let-row>
        <span class="text-sm">
          {{ row.data.created_date_time | date: 'short' }}
        </span>
      </ng-template>
    </div>
  </mix-table>
</div>
