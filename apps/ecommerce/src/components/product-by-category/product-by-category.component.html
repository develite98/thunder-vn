<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">
  <div
    class="col-span-1 h-full"
    *ngFor="let item of products() | slice: 0 : 4"
    role="button"
    tabindex="1"
  >
    <div
      (click)="goToProductDetail(item.id)"
      class="h-full card bg-base-100 border border-base-content/10 shadow-lg overflow-hidden hover:shadow-xl flex flex-col hover:scale-105 transition-all duration-300 cursor-pointer"
    >
      <figure class="border-b border-base-content/10 border-dashed">
        <img
          alt="{{ item.title }}"
          [src]="item.thumbnail || 'assets/images/image_placeholder.jpg'"
          class="h-[120px] md:h-[240px] w-full object-contain"
        />
      </figure>
      <div class="p-2.5 md:p-4 flex flex-col grow">
        <div class="mb-2 md:mb-2 font-medium text-xs md:text-sm">
          {{ item.title }}
        </div>

        @let items = getProductPrices(item);
        @if (items.length > 0) {
          <div class="flex flex-wrap items-center gap-1 md:gap-2 mb-2 md:mb-4">
            @for (item of items; track $index) {
              <div
                class="badge badge-xs badge-soft badge-primary whitespace-nowrap"
              >
                {{ item }}
              </div>
            }
          </div>
        }

        <div class="flex mt-2 items-center justify-between mt-auto">
          <div class="font-bold text-xs md:text-sm text-primary">
            @if (item.price) {
              <app-currency [value]="item.price"></app-currency>
            } @else {
              Liên Hệ
            }
          </div>
          <button
            (click)="
              $event.preventDefault(); $event.stopPropagation(); addToCart(item)
            "
            class="btn rounded-full btn-xs btn-square !shadow-lg mb-1 btn-primary p-1"
            aria-label="Thêm vào giỏ hàng"
          >
            <svg
              class="icon icon-plus"
              viewBox="0 0 93.562 93.562"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M87.952,41.17l-36.386,0.11V5.61c0-3.108-2.502-5.61-5.61-5.61c-3.107,0-5.61,2.502-5.61,5.61l0.11,35.561H5.61
                  c-3.108,0-5.61,2.502-5.61,5.61c0,3.107,2.502,5.609,5.61,5.609h34.791v35.562c0,3.106,2.502,5.61,5.61,5.61
                  c3.108,0,5.61-2.504,5.61-5.61V52.391h36.331c3.108,0,5.61-2.504,5.61-5.61C93.562,43.672,91.032,41.17,87.952,41.17z"
                fill="currentColor"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
